# Описание
Для Linux с установленной [.NET 7.0](https://dotnet.microsoft.com/download) (или необходимо использовать автономную версию приложения)

Программа просматривает каталог и снимает там для определённой группы права на доступ с помощью setfacl,
но только на те файлы, которые являются исполняемыми (и не перечислены в белом списке).
Служит для того, чтобы снять для пользователя возможность исполнения тех программ, которые ему не нужны. Таким образом немного понижается поверхность атаки. Это не заменяет политику ограниченного использования программ.

Сама программа создаёт sh-скрипт, который затем нужно запустить отдельно
Использование выглядит следующим образом
sudo setBinExecute configuration.file > set.sh
sudo bash set.sh

# Билд программы
Из директории файла проекта запустить
dotnet publish --output ./build -c Release --self-contained false --use-current-runtime true /p:PublishSingleFile=true -p:PublishReadyToRun=false


# Конфигурация
Содержимое конфигурационного файла:
    # Устанавливаем группу, которую хотим ограничит
    users:g:restricted_group
    # Устанавливаем пользователей, которых хотим ограничить
    users:u:restricted_user
    # Групп и пользователей может быть сколько угодно. Должна быть как минимум одна группа или пользователь
    users:u:restricted_user2

    # Устанавливаем директории, которые хотим просматривать и ограничивать
    dirs:/usr/
    dirs:/bin/
    dirs:/sbin
    dirs:/opt
    # Если директории не упомянуты, директории берутся из предыдущего списка групп

    # Устанавливаем белый список для данной группы пользователей
    # Списков может быть сколько угодно
    # Пути указываются относительно конфигурационного файла программы
    # Разрешённые пути могут быть только файлами. Директории в белом списке игнорируются
    whitelists:firstWhitelistFile
    whitelists:bash-white-list.file

    # Начинаем указание новых пользователей и групп
    # Директории для просмотра такие же, как и в группе выше,
    # поэтому мы их просто не указываем: они наследуются от предыдущей группы
    NEW::
    user:g:restricted_group2
    whitelists:secondWhitelistFile

# Запуск программы
Примеры запуска программы указаны в файлах exec.sh и exec-aide.sh

# Предупреждения
Пусть задана группа пользователей g. Программа устанавливает для этой группы пользователей запрет на запуск через setfacl. Однако, если запускаемый файл принадлежит группе g и на ней установлены права доступа "x", то запрещающий facl будет ниже, чем разрешающий. Соответственно, файл всё равно будет возможно запустить.
